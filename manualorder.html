<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manual Order - Dhito Cafe</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="daftarmenu.js"></script>

<style>
:root{
--glass: rgba(255,255,255,0.08);
--blur: blur(25px);
--primary: #4CAF50;
}

body{
margin:0;
background:linear-gradient(135deg,#0f172a,#1e293b);
color:white;
font-family:'Inter',sans-serif;
padding:20px;
}

/* ===== HEADER ===== */
.header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:25px;
}

.header h2{
margin:0;
font-weight:600;
}

.back-btn{
background:var(--glass);
backdrop-filter:var(--blur);
border:none;
color:white;
padding:8px 14px;
border-radius:14px;
cursor:pointer;
transition:.2s;
}

.back-btn:hover{
transform:translateY(-2px);
}

/* ===== MENU GRID ===== */
.menu-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
gap:15px;
}

.card{
background:var(--glass);
backdrop-filter:var(--blur);
padding:15px;
border-radius:18px;
transition:.3s;
}

.card:hover{
transform:translateY(-5px);
}

.card h4{
margin:0 0 5px 0;
font-weight:600;
}

.card p{
font-size:12px;
opacity:.6;
margin:0;
}

.qty{
display:flex;
gap:8px;
margin-top:12px;
}

.qty button{
flex:1;
border:none;
padding:6px;
border-radius:12px;
cursor:pointer;
background:rgba(255,255,255,0.15);
color:white;
transition:.2s;
}

.qty button:hover{
background:rgba(255,255,255,0.25);
}

/* ===== CART ===== */
.cart-box{
margin-top:30px;
background:var(--glass);
backdrop-filter:var(--blur);
padding:18px;
border-radius:20px;
}

.cart-box h3{
margin-top:0;
}

.cart-item{
display:flex;
justify-content:space-between;
margin-bottom:8px;
font-size:14px;
}

.total{
margin-top:15px;
font-weight:600;
}

.primary{
margin-top:15px;
width:100%;
border:none;
padding:10px;
border-radius:16px;
background:var(--primary);
color:white;
font-weight:600;
cursor:pointer;
transition:.2s;
}

.primary:hover{
transform:translateY(-2px);
}
</style>
</head>

<body>

<div class="header">
<h2>‚ûï Manual Order</h2>
<button class="back-btn" onclick="goBack()">‚Üê Kembali ke Kasir</button>
</div>

<div class="menu-grid" id="menuGrid"></div>

<div class="cart-box">
<h3>üõí Keranjang</h3>
<div id="cartList"></div>
<div class="total" id="cartTotal">Total: Rp 0</div>
<button class="primary" onclick="createOrder()">Buat Order</button>
</div>

<script>

const kasirMenu = MENU_DATA;
let cart=[];

function goBack(){
window.location.href="kasir.html";
}

function renderMenu(){
document.getElementById("menuGrid").innerHTML=
kasirMenu.map(item=>`
<div class="card">
<h4>${item.nama}</h4>
<p>Rp ${item.harga.toLocaleString()}</p>
<div class="qty">
<button onclick="changeQty('${item.nama}',-1)">‚àí</button>
<button onclick="changeQty('${item.nama}',1)">+</button>
</div>
</div>
`).join("");
}

function changeQty(nama,delta){

let item=kasirMenu.find(i=>i.nama===nama);
let existing=cart.find(c=>c.nama===nama);

if(!existing && delta>0){
cart.push({nama:item.nama,harga:item.harga,qty:1});
}else if(existing){
existing.qty+=delta;
if(existing.qty<=0)
cart=cart.filter(c=>c.nama!==nama);
}

renderCart();
}

function renderCart(){

let subtotal=0;

document.getElementById("cartList").innerHTML=
cart.map(i=>{
let total=i.harga*i.qty;
subtotal+=total;
return `
<div class="cart-item">
<span>${i.nama} (${i.qty}x)</span>
<span>Rp ${total.toLocaleString()}</span>
</div>`;
}).join("");

document.getElementById("cartTotal")
.innerText="Total: Rp "+subtotal.toLocaleString();
}

function createOrder(){

if(cart.length===0){
alert("Belum ada item");
return;
}

let subtotal=0;
cart.forEach(i=>subtotal+=i.harga*i.qty);

let service = subtotal * APP_CONFIG.SERVICE_PERCENT;
let tax = subtotal * APP_CONFIG.TAX_PERCENT;
let total = subtotal + service + tax;

let orders=JSON.parse(localStorage.getItem("order_history")||"[]");

orders.unshift({
id:"#ORD-"+Date.now(),
date:new Date().toLocaleString(),
timestamp:Date.now(),
items:cart,
subtotal,
service,
tax,
total,
paymentMethod:"KASIR",
paymentStatus:"Belum Lunas",
orderStatus:"Menunggu",
customerName:"Walk In",
customerPhone:"-"
});

localStorage.setItem("order_history",JSON.stringify(orders));

cart=[];
renderCart();

alert("Order berhasil dibuat!");
}

renderMenu();
</script>

</body>
</html>